<%
    var title = "Tag : " + page.tag;
    var posts = [];
    var total = 0;
    site.posts.sort("date", -1).each(function(post) {            
        var display = false;
        post.tags.forEach(function(tag) {
            display = display || tag.name == page.tag;
        });
        if(!display) return;
        posts.push(post);
        total++;
    });
%>
<article class="archive-page post white-box">
    <section class="meta">
        <h2 class="title">
            <span class="fa fa-tag"></span>
            <%= title %>
        </h2>
        <div class="count">
            <%= total %> posts in <%= page.tag %>
        </div>
    </section>
    <section class="archive">
        <% posts.forEach(function(post) { %>
        <div class="archive-item archive-post mark">
            <a href="<%= url_for(post.path) %>">
                <time>
                    <%= date(post.date, config.date_format) %>
                </time>
                <span class="title"><%= post.title %></span>
            </a>
        </div>
        <% }); %>
    </section>
</article>